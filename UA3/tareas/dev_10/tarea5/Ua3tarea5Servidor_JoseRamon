package ua3tarea5cliente_joseramon;
import java.io.*;
import java.net.*;

/**
 *
 * @author JRC
 */
public class Ua3tarea5Servidor_JoseRamon {
public class ServidorNum {
	static long numero;
	static long cuadrado;
	static long cubo;


	public static void main(String[] arg) throws IOException {

		int Puerto = 7000;
		String cuadradoADevolver;
		String cuboADevolver;
		try {

			ServerSocket Servidor = new ServerSocket(Puerto);
			System.out.println("Puerto por el que se escucha: " + Servidor.getLocalPort());
			Socket cliente1 = Servidor.accept();

			DataInputStream flujo_entrada = new DataInputStream(cliente1.getInputStream());
			String mensaje = flujo_entrada.readUTF();
			System.out.println("Numero a utilizar: " + mensaje);

			numero = Long.parseLong(mensaje);

			System.out.println("\n Conexion realizada con Ã©xito");

			Servidor.close();
		} catch (Exception e) {
			System.out.println("No se puede recibir recibir");
		}
		cuadrado = numero * numero;
		cubo = numero * numero * numero;
		cuadradoADevolver = Long.toString(cuadrado);
		cuboADevolver = Long.toString(cubo);
		String Host = "localhost";
		try {
			Socket mensajeVuelta = new Socket(Host, Puerto);

			DataOutputStream flujo_salida = new DataOutputStream(mensajeVuelta.getOutputStream());
			flujo_salida.writeUTF(cuadradoADevolver);
			flujo_salida.writeUTF(cuboADevolver);
			flujo_salida.close();
			mensajeVuelta.close();
		} catch (Exception e1) {
			System.out.println("No se puede enviar");
		}
	}

}
    
    
}
