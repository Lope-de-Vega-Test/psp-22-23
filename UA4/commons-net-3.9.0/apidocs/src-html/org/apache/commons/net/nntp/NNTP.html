<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
<title>Source code</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<div class="sourceContainer">
<pre><span class="sourceLineNo">001</span>/*<a name="line.1"></a>
<span class="sourceLineNo">002</span> * Licensed to the Apache Software Foundation (ASF) under one or more<a name="line.2"></a>
<span class="sourceLineNo">003</span> * contributor license agreements.  See the NOTICE file distributed with<a name="line.3"></a>
<span class="sourceLineNo">004</span> * this work for additional information regarding copyright ownership.<a name="line.4"></a>
<span class="sourceLineNo">005</span> * The ASF licenses this file to You under the Apache License, Version 2.0<a name="line.5"></a>
<span class="sourceLineNo">006</span> * (the "License"); you may not use this file except in compliance with<a name="line.6"></a>
<span class="sourceLineNo">007</span> * the License.  You may obtain a copy of the License at<a name="line.7"></a>
<span class="sourceLineNo">008</span> *<a name="line.8"></a>
<span class="sourceLineNo">009</span> *      http://www.apache.org/licenses/LICENSE-2.0<a name="line.9"></a>
<span class="sourceLineNo">010</span> *<a name="line.10"></a>
<span class="sourceLineNo">011</span> * Unless required by applicable law or agreed to in writing, software<a name="line.11"></a>
<span class="sourceLineNo">012</span> * distributed under the License is distributed on an "AS IS" BASIS,<a name="line.12"></a>
<span class="sourceLineNo">013</span> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<a name="line.13"></a>
<span class="sourceLineNo">014</span> * See the License for the specific language governing permissions and<a name="line.14"></a>
<span class="sourceLineNo">015</span> * limitations under the License.<a name="line.15"></a>
<span class="sourceLineNo">016</span> */<a name="line.16"></a>
<span class="sourceLineNo">017</span><a name="line.17"></a>
<span class="sourceLineNo">018</span>package org.apache.commons.net.nntp;<a name="line.18"></a>
<span class="sourceLineNo">019</span><a name="line.19"></a>
<span class="sourceLineNo">020</span>import java.io.BufferedReader;<a name="line.20"></a>
<span class="sourceLineNo">021</span>import java.io.BufferedWriter;<a name="line.21"></a>
<span class="sourceLineNo">022</span>import java.io.IOException;<a name="line.22"></a>
<span class="sourceLineNo">023</span>import java.io.InputStreamReader;<a name="line.23"></a>
<span class="sourceLineNo">024</span>import java.io.OutputStreamWriter;<a name="line.24"></a>
<span class="sourceLineNo">025</span>import java.nio.charset.Charset;<a name="line.25"></a>
<span class="sourceLineNo">026</span>import java.nio.charset.StandardCharsets;<a name="line.26"></a>
<span class="sourceLineNo">027</span><a name="line.27"></a>
<span class="sourceLineNo">028</span>import org.apache.commons.net.MalformedServerReplyException;<a name="line.28"></a>
<span class="sourceLineNo">029</span>import org.apache.commons.net.ProtocolCommandSupport;<a name="line.29"></a>
<span class="sourceLineNo">030</span>import org.apache.commons.net.SocketClient;<a name="line.30"></a>
<span class="sourceLineNo">031</span>import org.apache.commons.net.io.CRLFLineReader;<a name="line.31"></a>
<span class="sourceLineNo">032</span><a name="line.32"></a>
<span class="sourceLineNo">033</span>/**<a name="line.33"></a>
<span class="sourceLineNo">034</span> * The NNTP class is not meant to be used by itself and is provided only so that you may easily implement your own NNTP client if you so desire. If you have no<a name="line.34"></a>
<span class="sourceLineNo">035</span> * need to perform your own implementation, you should use {@link org.apache.commons.net.nntp.NNTPClient}. The NNTP class is made public to provide access to<a name="line.35"></a>
<span class="sourceLineNo">036</span> * various NNTP constants and to make it easier for adventurous programmers (or those with special needs) to interact with the NNTP protocol and implement their<a name="line.36"></a>
<span class="sourceLineNo">037</span> * own clients. A set of methods with names corresponding to the NNTP command names are provided to facilitate this interaction.<a name="line.37"></a>
<span class="sourceLineNo">038</span> * &lt;p&gt;<a name="line.38"></a>
<span class="sourceLineNo">039</span> * You should keep in mind that the NNTP server may choose to prematurely close a connection if the client has been idle for longer than a given time period or<a name="line.39"></a>
<span class="sourceLineNo">040</span> * if the server is being shutdown by the operator or some other reason. The NNTP class will detect a premature NNTP server connection closing when it receives<a name="line.40"></a>
<span class="sourceLineNo">041</span> * a {@link org.apache.commons.net.nntp.NNTPReply#SERVICE_DISCONTINUED NNTPReply.SERVICE_DISCONTINUED } response to a command. When that occurs, the NNTP class<a name="line.41"></a>
<span class="sourceLineNo">042</span> * method encountering that reply will throw an {@link org.apache.commons.net.nntp.NNTPConnectionClosedException} . &lt;code&gt;NNTPConectionClosedException&lt;/code&gt; is<a name="line.42"></a>
<span class="sourceLineNo">043</span> * a subclass of &lt;code&gt; IOException &lt;/code&gt; and therefore need not be caught separately, but if you are going to catch it separately, its catch block must<a name="line.43"></a>
<span class="sourceLineNo">044</span> * appear before the more general &lt;code&gt; IOException &lt;/code&gt; catch block. When you encounter an<a name="line.44"></a>
<span class="sourceLineNo">045</span> * {@link org.apache.commons.net.nntp.NNTPConnectionClosedException} , you must disconnect the connection with {@link #disconnect disconnect() } to properly<a name="line.45"></a>
<span class="sourceLineNo">046</span> * clean up the system resources used by NNTP. Before disconnecting, you may check the last reply code and text with {@link #getReplyCode getReplyCode } and<a name="line.46"></a>
<span class="sourceLineNo">047</span> * {@link #getReplyString getReplyString }.<a name="line.47"></a>
<span class="sourceLineNo">048</span> * &lt;p&gt;<a name="line.48"></a>
<span class="sourceLineNo">049</span> * Rather than list it separately for each method, we mention here that every method communicating with the server and throwing an IOException can also throw a<a name="line.49"></a>
<span class="sourceLineNo">050</span> * {@link org.apache.commons.net.MalformedServerReplyException} , which is a subclass of IOException. A MalformedServerReplyException will be thrown when the<a name="line.50"></a>
<span class="sourceLineNo">051</span> * reply received from the server deviates enough from the protocol specification that it cannot be interpreted in a useful manner despite attempts to be as<a name="line.51"></a>
<span class="sourceLineNo">052</span> * lenient as possible.<a name="line.52"></a>
<span class="sourceLineNo">053</span> *<a name="line.53"></a>
<span class="sourceLineNo">054</span> * @see NNTPClient<a name="line.54"></a>
<span class="sourceLineNo">055</span> * @see NNTPConnectionClosedException<a name="line.55"></a>
<span class="sourceLineNo">056</span> * @see org.apache.commons.net.MalformedServerReplyException<a name="line.56"></a>
<span class="sourceLineNo">057</span> */<a name="line.57"></a>
<span class="sourceLineNo">058</span><a name="line.58"></a>
<span class="sourceLineNo">059</span>public class NNTP extends SocketClient {<a name="line.59"></a>
<span class="sourceLineNo">060</span>    /** The default NNTP port. Its value is 119 according to RFC 977. */<a name="line.60"></a>
<span class="sourceLineNo">061</span>    public static final int DEFAULT_PORT = 119;<a name="line.61"></a>
<span class="sourceLineNo">062</span><a name="line.62"></a>
<span class="sourceLineNo">063</span>    // We have to ensure that the protocol communication is in ASCII<a name="line.63"></a>
<span class="sourceLineNo">064</span>    // but we use ISO-8859-1 just in case 8-bit characters cross<a name="line.64"></a>
<span class="sourceLineNo">065</span>    // the wire.<a name="line.65"></a>
<span class="sourceLineNo">066</span>    private static final Charset DEFAULT_ENCODING = StandardCharsets.ISO_8859_1;<a name="line.66"></a>
<span class="sourceLineNo">067</span><a name="line.67"></a>
<span class="sourceLineNo">068</span>    boolean _isAllowedToPost;<a name="line.68"></a>
<span class="sourceLineNo">069</span>    private int replyCode;<a name="line.69"></a>
<span class="sourceLineNo">070</span>    private String replyString;<a name="line.70"></a>
<span class="sourceLineNo">071</span><a name="line.71"></a>
<span class="sourceLineNo">072</span>    /**<a name="line.72"></a>
<span class="sourceLineNo">073</span>     * Wraps {@link SocketClient#_input_} to communicate with server. Initialized by {@link #_connectAction_}. All server reads should be done through this<a name="line.73"></a>
<span class="sourceLineNo">074</span>     * variable.<a name="line.74"></a>
<span class="sourceLineNo">075</span>     */<a name="line.75"></a>
<span class="sourceLineNo">076</span>    protected BufferedReader _reader_;<a name="line.76"></a>
<span class="sourceLineNo">077</span><a name="line.77"></a>
<span class="sourceLineNo">078</span>    /**<a name="line.78"></a>
<span class="sourceLineNo">079</span>     * Wraps {@link SocketClient#_output_} to communicate with server. Initialized by {@link #_connectAction_}. All server reads should be done through this<a name="line.79"></a>
<span class="sourceLineNo">080</span>     * variable.<a name="line.80"></a>
<span class="sourceLineNo">081</span>     */<a name="line.81"></a>
<span class="sourceLineNo">082</span>    protected BufferedWriter _writer_;<a name="line.82"></a>
<span class="sourceLineNo">083</span><a name="line.83"></a>
<span class="sourceLineNo">084</span>    /**<a name="line.84"></a>
<span class="sourceLineNo">085</span>     * A ProtocolCommandSupport object used to manage the registering of ProtocolCommandListeners and te firing of ProtocolCommandEvents.<a name="line.85"></a>
<span class="sourceLineNo">086</span>     */<a name="line.86"></a>
<span class="sourceLineNo">087</span>    protected ProtocolCommandSupport _commandSupport_;<a name="line.87"></a>
<span class="sourceLineNo">088</span><a name="line.88"></a>
<span class="sourceLineNo">089</span>    /**<a name="line.89"></a>
<span class="sourceLineNo">090</span>     * The default NNTP constructor. Sets the default port to &lt;code&gt;DEFAULT_PORT&lt;/code&gt; and initializes internal data structures for saving NNTP reply<a name="line.90"></a>
<span class="sourceLineNo">091</span>     * information.<a name="line.91"></a>
<span class="sourceLineNo">092</span>     */<a name="line.92"></a>
<span class="sourceLineNo">093</span>    public NNTP() {<a name="line.93"></a>
<span class="sourceLineNo">094</span>        setDefaultPort(DEFAULT_PORT);<a name="line.94"></a>
<span class="sourceLineNo">095</span>        replyString = null;<a name="line.95"></a>
<span class="sourceLineNo">096</span>        _reader_ = null;<a name="line.96"></a>
<span class="sourceLineNo">097</span>        _writer_ = null;<a name="line.97"></a>
<span class="sourceLineNo">098</span>        _isAllowedToPost = false;<a name="line.98"></a>
<span class="sourceLineNo">099</span>        _commandSupport_ = new ProtocolCommandSupport(this);<a name="line.99"></a>
<span class="sourceLineNo">100</span>    }<a name="line.100"></a>
<span class="sourceLineNo">101</span><a name="line.101"></a>
<span class="sourceLineNo">102</span>    /**<a name="line.102"></a>
<span class="sourceLineNo">103</span>     * Initiates control connections and gets initial reply, determining if the client is allowed to post to the server. Initializes {@link #_reader_} and<a name="line.103"></a>
<span class="sourceLineNo">104</span>     * {@link #_writer_} to wrap {@link SocketClient#_input_} and {@link SocketClient#_output_}.<a name="line.104"></a>
<span class="sourceLineNo">105</span>     */<a name="line.105"></a>
<span class="sourceLineNo">106</span>    @Override<a name="line.106"></a>
<span class="sourceLineNo">107</span>    protected void _connectAction_() throws IOException {<a name="line.107"></a>
<span class="sourceLineNo">108</span>        super._connectAction_();<a name="line.108"></a>
<span class="sourceLineNo">109</span>        _reader_ = new CRLFLineReader(new InputStreamReader(_input_, DEFAULT_ENCODING));<a name="line.109"></a>
<span class="sourceLineNo">110</span>        _writer_ = new BufferedWriter(new OutputStreamWriter(_output_, DEFAULT_ENCODING));<a name="line.110"></a>
<span class="sourceLineNo">111</span>        getReply();<a name="line.111"></a>
<span class="sourceLineNo">112</span><a name="line.112"></a>
<span class="sourceLineNo">113</span>        _isAllowedToPost = replyCode == NNTPReply.SERVER_READY_POSTING_ALLOWED;<a name="line.113"></a>
<span class="sourceLineNo">114</span>    }<a name="line.114"></a>
<span class="sourceLineNo">115</span><a name="line.115"></a>
<span class="sourceLineNo">116</span>    /**<a name="line.116"></a>
<span class="sourceLineNo">117</span>     * A convenience method to send the NNTP ARTICLE command to the server, receive the initial reply, and return the reply code.<a name="line.117"></a>
<span class="sourceLineNo">118</span>     * &lt;p&gt;<a name="line.118"></a>
<span class="sourceLineNo">119</span>     *<a name="line.119"></a>
<span class="sourceLineNo">120</span>     * @return The reply code received from the server.<a name="line.120"></a>
<span class="sourceLineNo">121</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.121"></a>
<span class="sourceLineNo">122</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.122"></a>
<span class="sourceLineNo">123</span>     *                                       independently as itself.<a name="line.123"></a>
<span class="sourceLineNo">124</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.124"></a>
<span class="sourceLineNo">125</span>     */<a name="line.125"></a>
<span class="sourceLineNo">126</span>    public int article() throws IOException {<a name="line.126"></a>
<span class="sourceLineNo">127</span>        return sendCommand(NNTPCommand.ARTICLE);<a name="line.127"></a>
<span class="sourceLineNo">128</span>    }<a name="line.128"></a>
<span class="sourceLineNo">129</span><a name="line.129"></a>
<span class="sourceLineNo">130</span>    /**<a name="line.130"></a>
<span class="sourceLineNo">131</span>     * @param a article number<a name="line.131"></a>
<span class="sourceLineNo">132</span>     * @return number<a name="line.132"></a>
<span class="sourceLineNo">133</span>     * @throws IOException on error<a name="line.133"></a>
<span class="sourceLineNo">134</span>     * @deprecated - for API compatibility only - DO NOT USE<a name="line.134"></a>
<span class="sourceLineNo">135</span>     */<a name="line.135"></a>
<span class="sourceLineNo">136</span>    @Deprecated<a name="line.136"></a>
<span class="sourceLineNo">137</span>    public int article(final int a) throws IOException {<a name="line.137"></a>
<span class="sourceLineNo">138</span>        return article((long) a);<a name="line.138"></a>
<span class="sourceLineNo">139</span>    }<a name="line.139"></a>
<span class="sourceLineNo">140</span><a name="line.140"></a>
<span class="sourceLineNo">141</span>    /**<a name="line.141"></a>
<span class="sourceLineNo">142</span>     * A convenience method to send the NNTP ARTICLE command to the server, receive the initial reply, and return the reply code.<a name="line.142"></a>
<span class="sourceLineNo">143</span>     * &lt;p&gt;<a name="line.143"></a>
<span class="sourceLineNo">144</span>     *<a name="line.144"></a>
<span class="sourceLineNo">145</span>     * @param articleNumber The number of the article to request from the currently selected newsgroup.<a name="line.145"></a>
<span class="sourceLineNo">146</span>     * @return The reply code received from the server.<a name="line.146"></a>
<span class="sourceLineNo">147</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.147"></a>
<span class="sourceLineNo">148</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.148"></a>
<span class="sourceLineNo">149</span>     *                                       independently as itself.<a name="line.149"></a>
<span class="sourceLineNo">150</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.150"></a>
<span class="sourceLineNo">151</span>     */<a name="line.151"></a>
<span class="sourceLineNo">152</span>    public int article(final long articleNumber) throws IOException {<a name="line.152"></a>
<span class="sourceLineNo">153</span>        return sendCommand(NNTPCommand.ARTICLE, Long.toString(articleNumber));<a name="line.153"></a>
<span class="sourceLineNo">154</span>    }<a name="line.154"></a>
<span class="sourceLineNo">155</span><a name="line.155"></a>
<span class="sourceLineNo">156</span>    /**<a name="line.156"></a>
<span class="sourceLineNo">157</span>     * A convenience method to send the NNTP ARTICLE command to the server, receive the initial reply, and return the reply code.<a name="line.157"></a>
<span class="sourceLineNo">158</span>     * &lt;p&gt;<a name="line.158"></a>
<span class="sourceLineNo">159</span>     *<a name="line.159"></a>
<span class="sourceLineNo">160</span>     * @param messageId The message identifier of the requested article, including the encapsulating &amp;lt; and &amp;gt; characters.<a name="line.160"></a>
<span class="sourceLineNo">161</span>     * @return The reply code received from the server.<a name="line.161"></a>
<span class="sourceLineNo">162</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.162"></a>
<span class="sourceLineNo">163</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.163"></a>
<span class="sourceLineNo">164</span>     *                                       independently as itself.<a name="line.164"></a>
<span class="sourceLineNo">165</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.165"></a>
<span class="sourceLineNo">166</span>     */<a name="line.166"></a>
<span class="sourceLineNo">167</span>    public int article(final String messageId) throws IOException {<a name="line.167"></a>
<span class="sourceLineNo">168</span>        return sendCommand(NNTPCommand.ARTICLE, messageId);<a name="line.168"></a>
<span class="sourceLineNo">169</span>    }<a name="line.169"></a>
<span class="sourceLineNo">170</span><a name="line.170"></a>
<span class="sourceLineNo">171</span>    /**<a name="line.171"></a>
<span class="sourceLineNo">172</span>     * A convenience method to send the AUTHINFO PASS command to the server, receive the reply, and return the reply code. If this step is required, it should<a name="line.172"></a>
<span class="sourceLineNo">173</span>     * immediately follow the AUTHINFO USER command (See RFC 2980)<a name="line.173"></a>
<span class="sourceLineNo">174</span>     * &lt;p&gt;<a name="line.174"></a>
<span class="sourceLineNo">175</span>     *<a name="line.175"></a>
<span class="sourceLineNo">176</span>     * @param password a valid password.<a name="line.176"></a>
<span class="sourceLineNo">177</span>     * @return The reply code received from the server. The server should return a 281 or 502 for this command.<a name="line.177"></a>
<span class="sourceLineNo">178</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.178"></a>
<span class="sourceLineNo">179</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.179"></a>
<span class="sourceLineNo">180</span>     *                                       independently as itself.<a name="line.180"></a>
<span class="sourceLineNo">181</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.181"></a>
<span class="sourceLineNo">182</span>     */<a name="line.182"></a>
<span class="sourceLineNo">183</span>    public int authinfoPass(final String password) throws IOException {<a name="line.183"></a>
<span class="sourceLineNo">184</span>        final String passParameter = "PASS " + password;<a name="line.184"></a>
<span class="sourceLineNo">185</span>        return sendCommand(NNTPCommand.AUTHINFO, passParameter);<a name="line.185"></a>
<span class="sourceLineNo">186</span>    }<a name="line.186"></a>
<span class="sourceLineNo">187</span><a name="line.187"></a>
<span class="sourceLineNo">188</span>    /**<a name="line.188"></a>
<span class="sourceLineNo">189</span>     * A convenience method to send the AUTHINFO USER command to the server, receive the reply, and return the reply code. (See RFC 2980)<a name="line.189"></a>
<span class="sourceLineNo">190</span>     * &lt;p&gt;<a name="line.190"></a>
<span class="sourceLineNo">191</span>     *<a name="line.191"></a>
<span class="sourceLineNo">192</span>     * @param username A valid username.<a name="line.192"></a>
<span class="sourceLineNo">193</span>     * @return The reply code received from the server. The server should return a 381 or 281 for this command.<a name="line.193"></a>
<span class="sourceLineNo">194</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.194"></a>
<span class="sourceLineNo">195</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.195"></a>
<span class="sourceLineNo">196</span>     *                                       independently as itself.<a name="line.196"></a>
<span class="sourceLineNo">197</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.197"></a>
<span class="sourceLineNo">198</span>     */<a name="line.198"></a>
<span class="sourceLineNo">199</span>    public int authinfoUser(final String username) throws IOException {<a name="line.199"></a>
<span class="sourceLineNo">200</span>        final String userParameter = "USER " + username;<a name="line.200"></a>
<span class="sourceLineNo">201</span>        return sendCommand(NNTPCommand.AUTHINFO, userParameter);<a name="line.201"></a>
<span class="sourceLineNo">202</span>    }<a name="line.202"></a>
<span class="sourceLineNo">203</span><a name="line.203"></a>
<span class="sourceLineNo">204</span>    /**<a name="line.204"></a>
<span class="sourceLineNo">205</span>     * A convenience method to send the NNTP BODY command to the server, receive the initial reply, and return the reply code.<a name="line.205"></a>
<span class="sourceLineNo">206</span>     * &lt;p&gt;<a name="line.206"></a>
<span class="sourceLineNo">207</span>     *<a name="line.207"></a>
<span class="sourceLineNo">208</span>     * @return The reply code received from the server.<a name="line.208"></a>
<span class="sourceLineNo">209</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.209"></a>
<span class="sourceLineNo">210</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.210"></a>
<span class="sourceLineNo">211</span>     *                                       independently as itself.<a name="line.211"></a>
<span class="sourceLineNo">212</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.212"></a>
<span class="sourceLineNo">213</span>     */<a name="line.213"></a>
<span class="sourceLineNo">214</span>    public int body() throws IOException {<a name="line.214"></a>
<span class="sourceLineNo">215</span>        return sendCommand(NNTPCommand.BODY);<a name="line.215"></a>
<span class="sourceLineNo">216</span>    }<a name="line.216"></a>
<span class="sourceLineNo">217</span><a name="line.217"></a>
<span class="sourceLineNo">218</span>    /**<a name="line.218"></a>
<span class="sourceLineNo">219</span>     * @param a article number<a name="line.219"></a>
<span class="sourceLineNo">220</span>     * @return number<a name="line.220"></a>
<span class="sourceLineNo">221</span>     * @throws IOException on error<a name="line.221"></a>
<span class="sourceLineNo">222</span>     * @deprecated - for API compatibility only - DO NOT USE<a name="line.222"></a>
<span class="sourceLineNo">223</span>     */<a name="line.223"></a>
<span class="sourceLineNo">224</span>    @Deprecated<a name="line.224"></a>
<span class="sourceLineNo">225</span>    public int body(final int a) throws IOException {<a name="line.225"></a>
<span class="sourceLineNo">226</span>        return body((long) a);<a name="line.226"></a>
<span class="sourceLineNo">227</span>    }<a name="line.227"></a>
<span class="sourceLineNo">228</span><a name="line.228"></a>
<span class="sourceLineNo">229</span>    /**<a name="line.229"></a>
<span class="sourceLineNo">230</span>     * A convenience method to send the NNTP BODY command to the server, receive the initial reply, and return the reply code.<a name="line.230"></a>
<span class="sourceLineNo">231</span>     * &lt;p&gt;<a name="line.231"></a>
<span class="sourceLineNo">232</span>     *<a name="line.232"></a>
<span class="sourceLineNo">233</span>     * @param articleNumber The number of the article to request from the currently selected newsgroup.<a name="line.233"></a>
<span class="sourceLineNo">234</span>     * @return The reply code received from the server.<a name="line.234"></a>
<span class="sourceLineNo">235</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.235"></a>
<span class="sourceLineNo">236</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.236"></a>
<span class="sourceLineNo">237</span>     *                                       independently as itself.<a name="line.237"></a>
<span class="sourceLineNo">238</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.238"></a>
<span class="sourceLineNo">239</span>     */<a name="line.239"></a>
<span class="sourceLineNo">240</span>    public int body(final long articleNumber) throws IOException {<a name="line.240"></a>
<span class="sourceLineNo">241</span>        return sendCommand(NNTPCommand.BODY, Long.toString(articleNumber));<a name="line.241"></a>
<span class="sourceLineNo">242</span>    }<a name="line.242"></a>
<span class="sourceLineNo">243</span><a name="line.243"></a>
<span class="sourceLineNo">244</span>    /**<a name="line.244"></a>
<span class="sourceLineNo">245</span>     * A convenience method to send the NNTP BODY command to the server, receive the initial reply, and return the reply code.<a name="line.245"></a>
<span class="sourceLineNo">246</span>     * &lt;p&gt;<a name="line.246"></a>
<span class="sourceLineNo">247</span>     *<a name="line.247"></a>
<span class="sourceLineNo">248</span>     * @param messageId The message identifier of the requested article, including the encapsulating &amp;lt; and &amp;gt; characters.<a name="line.248"></a>
<span class="sourceLineNo">249</span>     * @return The reply code received from the server.<a name="line.249"></a>
<span class="sourceLineNo">250</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.250"></a>
<span class="sourceLineNo">251</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.251"></a>
<span class="sourceLineNo">252</span>     *                                       independently as itself.<a name="line.252"></a>
<span class="sourceLineNo">253</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.253"></a>
<span class="sourceLineNo">254</span>     */<a name="line.254"></a>
<span class="sourceLineNo">255</span>    public int body(final String messageId) throws IOException {<a name="line.255"></a>
<span class="sourceLineNo">256</span>        return sendCommand(NNTPCommand.BODY, messageId);<a name="line.256"></a>
<span class="sourceLineNo">257</span>    }<a name="line.257"></a>
<span class="sourceLineNo">258</span><a name="line.258"></a>
<span class="sourceLineNo">259</span>    /**<a name="line.259"></a>
<span class="sourceLineNo">260</span>     * Closes the connection to the NNTP server and sets to null some internal data so that the memory may be reclaimed by the garbage collector. The reply text<a name="line.260"></a>
<span class="sourceLineNo">261</span>     * and code information from the last command is voided so that the memory it used may be reclaimed.<a name="line.261"></a>
<span class="sourceLineNo">262</span>     * &lt;p&gt;<a name="line.262"></a>
<span class="sourceLineNo">263</span>     *<a name="line.263"></a>
<span class="sourceLineNo">264</span>     * @throws IOException If an error occurs while disconnecting.<a name="line.264"></a>
<span class="sourceLineNo">265</span>     */<a name="line.265"></a>
<span class="sourceLineNo">266</span>    @Override<a name="line.266"></a>
<span class="sourceLineNo">267</span>    public void disconnect() throws IOException {<a name="line.267"></a>
<span class="sourceLineNo">268</span>        super.disconnect();<a name="line.268"></a>
<span class="sourceLineNo">269</span>        _reader_ = null;<a name="line.269"></a>
<span class="sourceLineNo">270</span>        _writer_ = null;<a name="line.270"></a>
<span class="sourceLineNo">271</span>        replyString = null;<a name="line.271"></a>
<span class="sourceLineNo">272</span>        _isAllowedToPost = false;<a name="line.272"></a>
<span class="sourceLineNo">273</span>    }<a name="line.273"></a>
<span class="sourceLineNo">274</span><a name="line.274"></a>
<span class="sourceLineNo">275</span>    /**<a name="line.275"></a>
<span class="sourceLineNo">276</span>     * Provide command support to super-class<a name="line.276"></a>
<span class="sourceLineNo">277</span>     */<a name="line.277"></a>
<span class="sourceLineNo">278</span>    @Override<a name="line.278"></a>
<span class="sourceLineNo">279</span>    protected ProtocolCommandSupport getCommandSupport() {<a name="line.279"></a>
<span class="sourceLineNo">280</span>        return _commandSupport_;<a name="line.280"></a>
<span class="sourceLineNo">281</span>    }<a name="line.281"></a>
<span class="sourceLineNo">282</span><a name="line.282"></a>
<span class="sourceLineNo">283</span>    /**<a name="line.283"></a>
<span class="sourceLineNo">284</span>     * Fetches a reply from the NNTP server and returns the integer reply code. After calling this method, the actual reply text can be accessed from<a name="line.284"></a>
<span class="sourceLineNo">285</span>     * {@link #getReplyString getReplyString }. Only use this method if you are implementing your own NNTP client or if you need to fetch a secondary response<a name="line.285"></a>
<span class="sourceLineNo">286</span>     * from the NNTP server.<a name="line.286"></a>
<span class="sourceLineNo">287</span>     * &lt;p&gt;<a name="line.287"></a>
<span class="sourceLineNo">288</span>     *<a name="line.288"></a>
<span class="sourceLineNo">289</span>     * @return The integer value of the reply code of the fetched NNTP reply. in response to the command.<a name="line.289"></a>
<span class="sourceLineNo">290</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.290"></a>
<span class="sourceLineNo">291</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.291"></a>
<span class="sourceLineNo">292</span>     *                                       independently as itself.<a name="line.292"></a>
<span class="sourceLineNo">293</span>     * @throws IOException                   If an I/O error occurs while receiving the server reply.<a name="line.293"></a>
<span class="sourceLineNo">294</span>     */<a name="line.294"></a>
<span class="sourceLineNo">295</span>    public int getReply() throws IOException {<a name="line.295"></a>
<span class="sourceLineNo">296</span>        replyString = _reader_.readLine();<a name="line.296"></a>
<span class="sourceLineNo">297</span><a name="line.297"></a>
<span class="sourceLineNo">298</span>        if (replyString == null) {<a name="line.298"></a>
<span class="sourceLineNo">299</span>            throw new NNTPConnectionClosedException("Connection closed without indication.");<a name="line.299"></a>
<span class="sourceLineNo">300</span>        }<a name="line.300"></a>
<span class="sourceLineNo">301</span><a name="line.301"></a>
<span class="sourceLineNo">302</span>        // In case we run into an anomaly we don't want fatal index exceptions<a name="line.302"></a>
<span class="sourceLineNo">303</span>        // to be thrown.<a name="line.303"></a>
<span class="sourceLineNo">304</span>        if (replyString.length() &lt; 3) {<a name="line.304"></a>
<span class="sourceLineNo">305</span>            throw new MalformedServerReplyException("Truncated server reply: " + replyString);<a name="line.305"></a>
<span class="sourceLineNo">306</span>        }<a name="line.306"></a>
<span class="sourceLineNo">307</span><a name="line.307"></a>
<span class="sourceLineNo">308</span>        try {<a name="line.308"></a>
<span class="sourceLineNo">309</span>            replyCode = Integer.parseInt(replyString.substring(0, 3));<a name="line.309"></a>
<span class="sourceLineNo">310</span>        } catch (final NumberFormatException e) {<a name="line.310"></a>
<span class="sourceLineNo">311</span>            throw new MalformedServerReplyException("Could not parse response code.\nServer Reply: " + replyString);<a name="line.311"></a>
<span class="sourceLineNo">312</span>        }<a name="line.312"></a>
<span class="sourceLineNo">313</span><a name="line.313"></a>
<span class="sourceLineNo">314</span>        fireReplyReceived(replyCode, replyString + SocketClient.NETASCII_EOL);<a name="line.314"></a>
<span class="sourceLineNo">315</span><a name="line.315"></a>
<span class="sourceLineNo">316</span>        if (replyCode == NNTPReply.SERVICE_DISCONTINUED) {<a name="line.316"></a>
<span class="sourceLineNo">317</span>            throw new NNTPConnectionClosedException("NNTP response 400 received.  Server closed connection.");<a name="line.317"></a>
<span class="sourceLineNo">318</span>        }<a name="line.318"></a>
<span class="sourceLineNo">319</span>        return replyCode;<a name="line.319"></a>
<span class="sourceLineNo">320</span>    }<a name="line.320"></a>
<span class="sourceLineNo">321</span><a name="line.321"></a>
<span class="sourceLineNo">322</span>    /**<a name="line.322"></a>
<span class="sourceLineNo">323</span>     * Returns the integer value of the reply code of the last NNTP reply. You will usually only use this method after you connect to the NNTP server to check<a name="line.323"></a>
<span class="sourceLineNo">324</span>     * that the connection was successful since &lt;code&gt; connect &lt;/code&gt; is of type void.<a name="line.324"></a>
<span class="sourceLineNo">325</span>     * &lt;p&gt;<a name="line.325"></a>
<span class="sourceLineNo">326</span>     *<a name="line.326"></a>
<span class="sourceLineNo">327</span>     * @return The integer value of the reply code of the last NNTP reply.<a name="line.327"></a>
<span class="sourceLineNo">328</span>     */<a name="line.328"></a>
<span class="sourceLineNo">329</span>    public int getReplyCode() {<a name="line.329"></a>
<span class="sourceLineNo">330</span>        return replyCode;<a name="line.330"></a>
<span class="sourceLineNo">331</span>    }<a name="line.331"></a>
<span class="sourceLineNo">332</span><a name="line.332"></a>
<span class="sourceLineNo">333</span>    /**<a name="line.333"></a>
<span class="sourceLineNo">334</span>     * Returns the entire text of the last NNTP server response exactly as it was received, not including the end of line marker.<a name="line.334"></a>
<span class="sourceLineNo">335</span>     * &lt;p&gt;<a name="line.335"></a>
<span class="sourceLineNo">336</span>     *<a name="line.336"></a>
<span class="sourceLineNo">337</span>     * @return The entire text from the last NNTP response as a String.<a name="line.337"></a>
<span class="sourceLineNo">338</span>     */<a name="line.338"></a>
<span class="sourceLineNo">339</span>    public String getReplyString() {<a name="line.339"></a>
<span class="sourceLineNo">340</span>        return replyString;<a name="line.340"></a>
<span class="sourceLineNo">341</span>    }<a name="line.341"></a>
<span class="sourceLineNo">342</span><a name="line.342"></a>
<span class="sourceLineNo">343</span>    /**<a name="line.343"></a>
<span class="sourceLineNo">344</span>     * A convenience method to send the NNTP GROUP command to the server, receive the reply, and return the reply code.<a name="line.344"></a>
<span class="sourceLineNo">345</span>     * &lt;p&gt;<a name="line.345"></a>
<span class="sourceLineNo">346</span>     *<a name="line.346"></a>
<span class="sourceLineNo">347</span>     * @param newsgroup The name of the newsgroup to select.<a name="line.347"></a>
<span class="sourceLineNo">348</span>     * @return The reply code received from the server.<a name="line.348"></a>
<span class="sourceLineNo">349</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.349"></a>
<span class="sourceLineNo">350</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.350"></a>
<span class="sourceLineNo">351</span>     *                                       independently as itself.<a name="line.351"></a>
<span class="sourceLineNo">352</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.352"></a>
<span class="sourceLineNo">353</span>     */<a name="line.353"></a>
<span class="sourceLineNo">354</span>    public int group(final String newsgroup) throws IOException {<a name="line.354"></a>
<span class="sourceLineNo">355</span>        return sendCommand(NNTPCommand.GROUP, newsgroup);<a name="line.355"></a>
<span class="sourceLineNo">356</span>    }<a name="line.356"></a>
<span class="sourceLineNo">357</span><a name="line.357"></a>
<span class="sourceLineNo">358</span>    /**<a name="line.358"></a>
<span class="sourceLineNo">359</span>     * A convenience method to send the NNTP HEAD command to the server, receive the initial reply, and return the reply code.<a name="line.359"></a>
<span class="sourceLineNo">360</span>     * &lt;p&gt;<a name="line.360"></a>
<span class="sourceLineNo">361</span>     *<a name="line.361"></a>
<span class="sourceLineNo">362</span>     * @return The reply code received from the server.<a name="line.362"></a>
<span class="sourceLineNo">363</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.363"></a>
<span class="sourceLineNo">364</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.364"></a>
<span class="sourceLineNo">365</span>     *                                       independently as itself.<a name="line.365"></a>
<span class="sourceLineNo">366</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.366"></a>
<span class="sourceLineNo">367</span>     */<a name="line.367"></a>
<span class="sourceLineNo">368</span>    public int head() throws IOException {<a name="line.368"></a>
<span class="sourceLineNo">369</span>        return sendCommand(NNTPCommand.HEAD);<a name="line.369"></a>
<span class="sourceLineNo">370</span>    }<a name="line.370"></a>
<span class="sourceLineNo">371</span><a name="line.371"></a>
<span class="sourceLineNo">372</span>    /**<a name="line.372"></a>
<span class="sourceLineNo">373</span>     * @param a article number<a name="line.373"></a>
<span class="sourceLineNo">374</span>     * @return number<a name="line.374"></a>
<span class="sourceLineNo">375</span>     * @throws IOException on error<a name="line.375"></a>
<span class="sourceLineNo">376</span>     * @deprecated - for API compatibility only - DO NOT USE<a name="line.376"></a>
<span class="sourceLineNo">377</span>     */<a name="line.377"></a>
<span class="sourceLineNo">378</span>    @Deprecated<a name="line.378"></a>
<span class="sourceLineNo">379</span>    public int head(final int a) throws IOException {<a name="line.379"></a>
<span class="sourceLineNo">380</span>        return head((long) a);<a name="line.380"></a>
<span class="sourceLineNo">381</span>    }<a name="line.381"></a>
<span class="sourceLineNo">382</span><a name="line.382"></a>
<span class="sourceLineNo">383</span>    /**<a name="line.383"></a>
<span class="sourceLineNo">384</span>     * A convenience method to send the NNTP HEAD command to the server, receive the initial reply, and return the reply code.<a name="line.384"></a>
<span class="sourceLineNo">385</span>     * &lt;p&gt;<a name="line.385"></a>
<span class="sourceLineNo">386</span>     *<a name="line.386"></a>
<span class="sourceLineNo">387</span>     * @param articleNumber The number of the article to request from the currently selected newsgroup.<a name="line.387"></a>
<span class="sourceLineNo">388</span>     * @return The reply code received from the server.<a name="line.388"></a>
<span class="sourceLineNo">389</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.389"></a>
<span class="sourceLineNo">390</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.390"></a>
<span class="sourceLineNo">391</span>     *                                       independently as itself.<a name="line.391"></a>
<span class="sourceLineNo">392</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.392"></a>
<span class="sourceLineNo">393</span>     */<a name="line.393"></a>
<span class="sourceLineNo">394</span>    public int head(final long articleNumber) throws IOException {<a name="line.394"></a>
<span class="sourceLineNo">395</span>        return sendCommand(NNTPCommand.HEAD, Long.toString(articleNumber));<a name="line.395"></a>
<span class="sourceLineNo">396</span>    }<a name="line.396"></a>
<span class="sourceLineNo">397</span><a name="line.397"></a>
<span class="sourceLineNo">398</span>    /**<a name="line.398"></a>
<span class="sourceLineNo">399</span>     * A convenience method to send the NNTP HEAD command to the server, receive the initial reply, and return the reply code.<a name="line.399"></a>
<span class="sourceLineNo">400</span>     * &lt;p&gt;<a name="line.400"></a>
<span class="sourceLineNo">401</span>     *<a name="line.401"></a>
<span class="sourceLineNo">402</span>     * @param messageId The message identifier of the requested article, including the encapsulating &amp;lt; and &amp;gt; characters.<a name="line.402"></a>
<span class="sourceLineNo">403</span>     * @return The reply code received from the server.<a name="line.403"></a>
<span class="sourceLineNo">404</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.404"></a>
<span class="sourceLineNo">405</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.405"></a>
<span class="sourceLineNo">406</span>     *                                       independently as itself.<a name="line.406"></a>
<span class="sourceLineNo">407</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.407"></a>
<span class="sourceLineNo">408</span>     */<a name="line.408"></a>
<span class="sourceLineNo">409</span>    public int head(final String messageId) throws IOException {<a name="line.409"></a>
<span class="sourceLineNo">410</span>        return sendCommand(NNTPCommand.HEAD, messageId);<a name="line.410"></a>
<span class="sourceLineNo">411</span>    }<a name="line.411"></a>
<span class="sourceLineNo">412</span><a name="line.412"></a>
<span class="sourceLineNo">413</span>    /**<a name="line.413"></a>
<span class="sourceLineNo">414</span>     * A convenience method to send the NNTP HELP command to the server, receive the reply, and return the reply code.<a name="line.414"></a>
<span class="sourceLineNo">415</span>     * &lt;p&gt;<a name="line.415"></a>
<span class="sourceLineNo">416</span>     *<a name="line.416"></a>
<span class="sourceLineNo">417</span>     * @return The reply code received from the server.<a name="line.417"></a>
<span class="sourceLineNo">418</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.418"></a>
<span class="sourceLineNo">419</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.419"></a>
<span class="sourceLineNo">420</span>     *                                       independently as itself.<a name="line.420"></a>
<span class="sourceLineNo">421</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.421"></a>
<span class="sourceLineNo">422</span>     */<a name="line.422"></a>
<span class="sourceLineNo">423</span>    public int help() throws IOException {<a name="line.423"></a>
<span class="sourceLineNo">424</span>        return sendCommand(NNTPCommand.HELP);<a name="line.424"></a>
<span class="sourceLineNo">425</span>    }<a name="line.425"></a>
<span class="sourceLineNo">426</span><a name="line.426"></a>
<span class="sourceLineNo">427</span>    /**<a name="line.427"></a>
<span class="sourceLineNo">428</span>     * A convenience method to send the NNTP IHAVE command to the server, receive the reply, and return the reply code.<a name="line.428"></a>
<span class="sourceLineNo">429</span>     * &lt;p&gt;<a name="line.429"></a>
<span class="sourceLineNo">430</span>     *<a name="line.430"></a>
<span class="sourceLineNo">431</span>     * @param messageId The article identifier, including the encapsulating &amp;lt; and &amp;gt; characters.<a name="line.431"></a>
<span class="sourceLineNo">432</span>     * @return The reply code received from the server.<a name="line.432"></a>
<span class="sourceLineNo">433</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.433"></a>
<span class="sourceLineNo">434</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.434"></a>
<span class="sourceLineNo">435</span>     *                                       independently as itself.<a name="line.435"></a>
<span class="sourceLineNo">436</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.436"></a>
<span class="sourceLineNo">437</span>     */<a name="line.437"></a>
<span class="sourceLineNo">438</span>    public int ihave(final String messageId) throws IOException {<a name="line.438"></a>
<span class="sourceLineNo">439</span>        return sendCommand(NNTPCommand.IHAVE, messageId);<a name="line.439"></a>
<span class="sourceLineNo">440</span>    }<a name="line.440"></a>
<span class="sourceLineNo">441</span><a name="line.441"></a>
<span class="sourceLineNo">442</span>    /**<a name="line.442"></a>
<span class="sourceLineNo">443</span>     * Indicates whether or not the client is allowed to post articles to the server it is currently connected to.<a name="line.443"></a>
<span class="sourceLineNo">444</span>     * &lt;p&gt;<a name="line.444"></a>
<span class="sourceLineNo">445</span>     *<a name="line.445"></a>
<span class="sourceLineNo">446</span>     * @return True if the client can post articles to the server, false otherwise.<a name="line.446"></a>
<span class="sourceLineNo">447</span>     */<a name="line.447"></a>
<span class="sourceLineNo">448</span>    public boolean isAllowedToPost() {<a name="line.448"></a>
<span class="sourceLineNo">449</span>        return _isAllowedToPost;<a name="line.449"></a>
<span class="sourceLineNo">450</span>    }<a name="line.450"></a>
<span class="sourceLineNo">451</span><a name="line.451"></a>
<span class="sourceLineNo">452</span>    /**<a name="line.452"></a>
<span class="sourceLineNo">453</span>     * A convenience method to send the NNTP LAST command to the server, receive the reply, and return the reply code.<a name="line.453"></a>
<span class="sourceLineNo">454</span>     * &lt;p&gt;<a name="line.454"></a>
<span class="sourceLineNo">455</span>     *<a name="line.455"></a>
<span class="sourceLineNo">456</span>     * @return The reply code received from the server.<a name="line.456"></a>
<span class="sourceLineNo">457</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.457"></a>
<span class="sourceLineNo">458</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.458"></a>
<span class="sourceLineNo">459</span>     *                                       independently as itself.<a name="line.459"></a>
<span class="sourceLineNo">460</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.460"></a>
<span class="sourceLineNo">461</span>     */<a name="line.461"></a>
<span class="sourceLineNo">462</span>    public int last() throws IOException {<a name="line.462"></a>
<span class="sourceLineNo">463</span>        return sendCommand(NNTPCommand.LAST);<a name="line.463"></a>
<span class="sourceLineNo">464</span>    }<a name="line.464"></a>
<span class="sourceLineNo">465</span><a name="line.465"></a>
<span class="sourceLineNo">466</span>    /**<a name="line.466"></a>
<span class="sourceLineNo">467</span>     * A convenience method to send the NNTP LIST command to the server, receive the reply, and return the reply code.<a name="line.467"></a>
<span class="sourceLineNo">468</span>     * &lt;p&gt;<a name="line.468"></a>
<span class="sourceLineNo">469</span>     *<a name="line.469"></a>
<span class="sourceLineNo">470</span>     * @return The reply code received from the server.<a name="line.470"></a>
<span class="sourceLineNo">471</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.471"></a>
<span class="sourceLineNo">472</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.472"></a>
<span class="sourceLineNo">473</span>     *                                       independently as itself.<a name="line.473"></a>
<span class="sourceLineNo">474</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.474"></a>
<span class="sourceLineNo">475</span>     */<a name="line.475"></a>
<span class="sourceLineNo">476</span>    public int list() throws IOException {<a name="line.476"></a>
<span class="sourceLineNo">477</span>        return sendCommand(NNTPCommand.LIST);<a name="line.477"></a>
<span class="sourceLineNo">478</span>    }<a name="line.478"></a>
<span class="sourceLineNo">479</span><a name="line.479"></a>
<span class="sourceLineNo">480</span>    /**<a name="line.480"></a>
<span class="sourceLineNo">481</span>     * A convenience wrapper for the extended LIST command that takes an argument, allowing us to selectively list multiple groups.<a name="line.481"></a>
<span class="sourceLineNo">482</span>     * &lt;p&gt;<a name="line.482"></a>
<span class="sourceLineNo">483</span>     *<a name="line.483"></a>
<span class="sourceLineNo">484</span>     * @param wildmat A wildmat (pseudo-regex) pattern. See RFC 2980 for details.<a name="line.484"></a>
<span class="sourceLineNo">485</span>     * @return the reply code received from the server.<a name="line.485"></a>
<span class="sourceLineNo">486</span>     * @throws IOException if the command fails<a name="line.486"></a>
<span class="sourceLineNo">487</span>     */<a name="line.487"></a>
<span class="sourceLineNo">488</span>    public int listActive(final String wildmat) throws IOException {<a name="line.488"></a>
<span class="sourceLineNo">489</span>        final StringBuilder command = new StringBuilder("ACTIVE ");<a name="line.489"></a>
<span class="sourceLineNo">490</span>        command.append(wildmat);<a name="line.490"></a>
<span class="sourceLineNo">491</span>        return sendCommand(NNTPCommand.LIST, command.toString());<a name="line.491"></a>
<span class="sourceLineNo">492</span>    }<a name="line.492"></a>
<span class="sourceLineNo">493</span><a name="line.493"></a>
<span class="sourceLineNo">494</span>    /**<a name="line.494"></a>
<span class="sourceLineNo">495</span>     * A convenience method to send the "NEWGROUPS" command to the server, receive the reply, and return the reply code.<a name="line.495"></a>
<span class="sourceLineNo">496</span>     * &lt;p&gt;<a name="line.496"></a>
<span class="sourceLineNo">497</span>     *<a name="line.497"></a>
<span class="sourceLineNo">498</span>     * @param date          The date after which to check for new groups. Date format is YYMMDD<a name="line.498"></a>
<span class="sourceLineNo">499</span>     * @param time          The time after which to check for new groups. Time format is HHMMSS using a 24-hour clock.<a name="line.499"></a>
<span class="sourceLineNo">500</span>     * @param GMT           True if the time is in GMT, false if local server time.<a name="line.500"></a>
<span class="sourceLineNo">501</span>     * @param distributions Comma-separated distribution list to check for new groups. Set to null if no distributions.<a name="line.501"></a>
<span class="sourceLineNo">502</span>     * @return The reply code received from the server.<a name="line.502"></a>
<span class="sourceLineNo">503</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.503"></a>
<span class="sourceLineNo">504</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.504"></a>
<span class="sourceLineNo">505</span>     *                                       independently as itself.<a name="line.505"></a>
<span class="sourceLineNo">506</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.506"></a>
<span class="sourceLineNo">507</span>     */<a name="line.507"></a>
<span class="sourceLineNo">508</span>    public int newgroups(final String date, final String time, final boolean GMT, final String distributions) throws IOException {<a name="line.508"></a>
<span class="sourceLineNo">509</span>        final StringBuilder buffer = new StringBuilder();<a name="line.509"></a>
<span class="sourceLineNo">510</span><a name="line.510"></a>
<span class="sourceLineNo">511</span>        buffer.append(date);<a name="line.511"></a>
<span class="sourceLineNo">512</span>        buffer.append(' ');<a name="line.512"></a>
<span class="sourceLineNo">513</span>        buffer.append(time);<a name="line.513"></a>
<span class="sourceLineNo">514</span><a name="line.514"></a>
<span class="sourceLineNo">515</span>        if (GMT) {<a name="line.515"></a>
<span class="sourceLineNo">516</span>            buffer.append(' ');<a name="line.516"></a>
<span class="sourceLineNo">517</span>            buffer.append("GMT");<a name="line.517"></a>
<span class="sourceLineNo">518</span>        }<a name="line.518"></a>
<span class="sourceLineNo">519</span><a name="line.519"></a>
<span class="sourceLineNo">520</span>        if (distributions != null) {<a name="line.520"></a>
<span class="sourceLineNo">521</span>            buffer.append(" &lt;");<a name="line.521"></a>
<span class="sourceLineNo">522</span>            buffer.append(distributions);<a name="line.522"></a>
<span class="sourceLineNo">523</span>            buffer.append('&gt;');<a name="line.523"></a>
<span class="sourceLineNo">524</span>        }<a name="line.524"></a>
<span class="sourceLineNo">525</span><a name="line.525"></a>
<span class="sourceLineNo">526</span>        return sendCommand(NNTPCommand.NEWGROUPS, buffer.toString());<a name="line.526"></a>
<span class="sourceLineNo">527</span>    }<a name="line.527"></a>
<span class="sourceLineNo">528</span><a name="line.528"></a>
<span class="sourceLineNo">529</span>    /**<a name="line.529"></a>
<span class="sourceLineNo">530</span>     * A convenience method to send the "NEWNEWS" command to the server, receive the reply, and return the reply code.<a name="line.530"></a>
<span class="sourceLineNo">531</span>     * &lt;p&gt;<a name="line.531"></a>
<span class="sourceLineNo">532</span>     *<a name="line.532"></a>
<span class="sourceLineNo">533</span>     * @param newsgroups    A comma-separated list of newsgroups to check for new news.<a name="line.533"></a>
<span class="sourceLineNo">534</span>     * @param date          The date after which to check for new news. Date format is YYMMDD<a name="line.534"></a>
<span class="sourceLineNo">535</span>     * @param time          The time after which to check for new news. Time format is HHMMSS using a 24-hour clock.<a name="line.535"></a>
<span class="sourceLineNo">536</span>     * @param GMT           True if the time is in GMT, false if local server time.<a name="line.536"></a>
<span class="sourceLineNo">537</span>     * @param distributions Comma-separated distribution list to check for new news. Set to null if no distributions.<a name="line.537"></a>
<span class="sourceLineNo">538</span>     * @return The reply code received from the server.<a name="line.538"></a>
<span class="sourceLineNo">539</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.539"></a>
<span class="sourceLineNo">540</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.540"></a>
<span class="sourceLineNo">541</span>     *                                       independently as itself.<a name="line.541"></a>
<span class="sourceLineNo">542</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.542"></a>
<span class="sourceLineNo">543</span>     */<a name="line.543"></a>
<span class="sourceLineNo">544</span>    public int newnews(final String newsgroups, final String date, final String time, final boolean GMT, final String distributions) throws IOException {<a name="line.544"></a>
<span class="sourceLineNo">545</span>        final StringBuilder buffer = new StringBuilder();<a name="line.545"></a>
<span class="sourceLineNo">546</span><a name="line.546"></a>
<span class="sourceLineNo">547</span>        buffer.append(newsgroups);<a name="line.547"></a>
<span class="sourceLineNo">548</span>        buffer.append(' ');<a name="line.548"></a>
<span class="sourceLineNo">549</span>        buffer.append(date);<a name="line.549"></a>
<span class="sourceLineNo">550</span>        buffer.append(' ');<a name="line.550"></a>
<span class="sourceLineNo">551</span>        buffer.append(time);<a name="line.551"></a>
<span class="sourceLineNo">552</span><a name="line.552"></a>
<span class="sourceLineNo">553</span>        if (GMT) {<a name="line.553"></a>
<span class="sourceLineNo">554</span>            buffer.append(' ');<a name="line.554"></a>
<span class="sourceLineNo">555</span>            buffer.append("GMT");<a name="line.555"></a>
<span class="sourceLineNo">556</span>        }<a name="line.556"></a>
<span class="sourceLineNo">557</span><a name="line.557"></a>
<span class="sourceLineNo">558</span>        if (distributions != null) {<a name="line.558"></a>
<span class="sourceLineNo">559</span>            buffer.append(" &lt;");<a name="line.559"></a>
<span class="sourceLineNo">560</span>            buffer.append(distributions);<a name="line.560"></a>
<span class="sourceLineNo">561</span>            buffer.append('&gt;');<a name="line.561"></a>
<span class="sourceLineNo">562</span>        }<a name="line.562"></a>
<span class="sourceLineNo">563</span><a name="line.563"></a>
<span class="sourceLineNo">564</span>        return sendCommand(NNTPCommand.NEWNEWS, buffer.toString());<a name="line.564"></a>
<span class="sourceLineNo">565</span>    }<a name="line.565"></a>
<span class="sourceLineNo">566</span><a name="line.566"></a>
<span class="sourceLineNo">567</span>    /**<a name="line.567"></a>
<span class="sourceLineNo">568</span>     * A convenience method to send the NNTP NEXT command to the server, receive the reply, and return the reply code.<a name="line.568"></a>
<span class="sourceLineNo">569</span>     * &lt;p&gt;<a name="line.569"></a>
<span class="sourceLineNo">570</span>     *<a name="line.570"></a>
<span class="sourceLineNo">571</span>     * @return The reply code received from the server.<a name="line.571"></a>
<span class="sourceLineNo">572</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.572"></a>
<span class="sourceLineNo">573</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.573"></a>
<span class="sourceLineNo">574</span>     *                                       independently as itself.<a name="line.574"></a>
<span class="sourceLineNo">575</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.575"></a>
<span class="sourceLineNo">576</span>     */<a name="line.576"></a>
<span class="sourceLineNo">577</span>    public int next() throws IOException {<a name="line.577"></a>
<span class="sourceLineNo">578</span>        return sendCommand(NNTPCommand.NEXT);<a name="line.578"></a>
<span class="sourceLineNo">579</span>    }<a name="line.579"></a>
<span class="sourceLineNo">580</span><a name="line.580"></a>
<span class="sourceLineNo">581</span>    /**<a name="line.581"></a>
<span class="sourceLineNo">582</span>     * A convenience method to send the NNTP POST command to the server, receive the reply, and return the reply code.<a name="line.582"></a>
<span class="sourceLineNo">583</span>     * &lt;p&gt;<a name="line.583"></a>
<span class="sourceLineNo">584</span>     *<a name="line.584"></a>
<span class="sourceLineNo">585</span>     * @return The reply code received from the server.<a name="line.585"></a>
<span class="sourceLineNo">586</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.586"></a>
<span class="sourceLineNo">587</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.587"></a>
<span class="sourceLineNo">588</span>     *                                       independently as itself.<a name="line.588"></a>
<span class="sourceLineNo">589</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.589"></a>
<span class="sourceLineNo">590</span>     */<a name="line.590"></a>
<span class="sourceLineNo">591</span>    public int post() throws IOException {<a name="line.591"></a>
<span class="sourceLineNo">592</span>        return sendCommand(NNTPCommand.POST);<a name="line.592"></a>
<span class="sourceLineNo">593</span>    }<a name="line.593"></a>
<span class="sourceLineNo">594</span><a name="line.594"></a>
<span class="sourceLineNo">595</span>    /**<a name="line.595"></a>
<span class="sourceLineNo">596</span>     * A convenience method to send the NNTP QUIT command to the server, receive the reply, and return the reply code.<a name="line.596"></a>
<span class="sourceLineNo">597</span>     * &lt;p&gt;<a name="line.597"></a>
<span class="sourceLineNo">598</span>     *<a name="line.598"></a>
<span class="sourceLineNo">599</span>     * @return The reply code received from the server.<a name="line.599"></a>
<span class="sourceLineNo">600</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.600"></a>
<span class="sourceLineNo">601</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.601"></a>
<span class="sourceLineNo">602</span>     *                                       independently as itself.<a name="line.602"></a>
<span class="sourceLineNo">603</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.603"></a>
<span class="sourceLineNo">604</span>     */<a name="line.604"></a>
<span class="sourceLineNo">605</span>    public int quit() throws IOException {<a name="line.605"></a>
<span class="sourceLineNo">606</span>        return sendCommand(NNTPCommand.QUIT);<a name="line.606"></a>
<span class="sourceLineNo">607</span>    }<a name="line.607"></a>
<span class="sourceLineNo">608</span><a name="line.608"></a>
<span class="sourceLineNo">609</span>    /**<a name="line.609"></a>
<span class="sourceLineNo">610</span>     * Sends an NNTP command with no arguments to the server, waits for a reply and returns the numerical response code. After invocation, for more detailed<a name="line.610"></a>
<span class="sourceLineNo">611</span>     * information, the actual reply text can be accessed by calling {@link #getReplyString getReplyString }.<a name="line.611"></a>
<span class="sourceLineNo">612</span>     * &lt;p&gt;<a name="line.612"></a>
<span class="sourceLineNo">613</span>     *<a name="line.613"></a>
<span class="sourceLineNo">614</span>     * @param command The NNTPCommand constant corresponding to the NNTP command to send.<a name="line.614"></a>
<span class="sourceLineNo">615</span>     * @return The integer value of the NNTP reply code returned by the server in response to the command. in response to the command.<a name="line.615"></a>
<span class="sourceLineNo">616</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.616"></a>
<span class="sourceLineNo">617</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.617"></a>
<span class="sourceLineNo">618</span>     *                                       independently as itself.<a name="line.618"></a>
<span class="sourceLineNo">619</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.619"></a>
<span class="sourceLineNo">620</span>     */<a name="line.620"></a>
<span class="sourceLineNo">621</span>    public int sendCommand(final int command) throws IOException {<a name="line.621"></a>
<span class="sourceLineNo">622</span>        return sendCommand(command, null);<a name="line.622"></a>
<span class="sourceLineNo">623</span>    }<a name="line.623"></a>
<span class="sourceLineNo">624</span><a name="line.624"></a>
<span class="sourceLineNo">625</span>    /**<a name="line.625"></a>
<span class="sourceLineNo">626</span>     * Sends an NNTP command to the server, waits for a reply and returns the numerical response code. After invocation, for more detailed information, the<a name="line.626"></a>
<span class="sourceLineNo">627</span>     * actual reply text can be accessed by calling {@link #getReplyString getReplyString }.<a name="line.627"></a>
<span class="sourceLineNo">628</span>     * &lt;p&gt;<a name="line.628"></a>
<span class="sourceLineNo">629</span>     *<a name="line.629"></a>
<span class="sourceLineNo">630</span>     * @param command The NNTPCommand constant corresponding to the NNTP command to send.<a name="line.630"></a>
<span class="sourceLineNo">631</span>     * @param args    The arguments to the NNTP command. If this parameter is set to null, then the command is sent with no argument.<a name="line.631"></a>
<span class="sourceLineNo">632</span>     * @return The integer value of the NNTP reply code returned by the server in response to the command. in response to the command.<a name="line.632"></a>
<span class="sourceLineNo">633</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.633"></a>
<span class="sourceLineNo">634</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.634"></a>
<span class="sourceLineNo">635</span>     *                                       independently as itself.<a name="line.635"></a>
<span class="sourceLineNo">636</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.636"></a>
<span class="sourceLineNo">637</span>     */<a name="line.637"></a>
<span class="sourceLineNo">638</span>    public int sendCommand(final int command, final String args) throws IOException {<a name="line.638"></a>
<span class="sourceLineNo">639</span>        return sendCommand(NNTPCommand.getCommand(command), args);<a name="line.639"></a>
<span class="sourceLineNo">640</span>    }<a name="line.640"></a>
<span class="sourceLineNo">641</span><a name="line.641"></a>
<span class="sourceLineNo">642</span>    /**<a name="line.642"></a>
<span class="sourceLineNo">643</span>     * Sends an NNTP command with no arguments to the server, waits for a reply and returns the numerical response code. After invocation, for more detailed<a name="line.643"></a>
<span class="sourceLineNo">644</span>     * information, the actual reply text can be accessed by calling {@link #getReplyString getReplyString }.<a name="line.644"></a>
<span class="sourceLineNo">645</span>     * &lt;p&gt;<a name="line.645"></a>
<span class="sourceLineNo">646</span>     *<a name="line.646"></a>
<span class="sourceLineNo">647</span>     * @param command The text representation of the NNTP command to send.<a name="line.647"></a>
<span class="sourceLineNo">648</span>     * @return The integer value of the NNTP reply code returned by the server in response to the command. in response to the command.<a name="line.648"></a>
<span class="sourceLineNo">649</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.649"></a>
<span class="sourceLineNo">650</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.650"></a>
<span class="sourceLineNo">651</span>     *                                       independently as itself.<a name="line.651"></a>
<span class="sourceLineNo">652</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.652"></a>
<span class="sourceLineNo">653</span>     */<a name="line.653"></a>
<span class="sourceLineNo">654</span>    public int sendCommand(final String command) throws IOException {<a name="line.654"></a>
<span class="sourceLineNo">655</span>        return sendCommand(command, null);<a name="line.655"></a>
<span class="sourceLineNo">656</span>    }<a name="line.656"></a>
<span class="sourceLineNo">657</span><a name="line.657"></a>
<span class="sourceLineNo">658</span>    /**<a name="line.658"></a>
<span class="sourceLineNo">659</span>     * Sends an NNTP command to the server, waits for a reply and returns the numerical response code. After invocation, for more detailed information, the<a name="line.659"></a>
<span class="sourceLineNo">660</span>     * actual reply text can be accessed by calling {@link #getReplyString getReplyString }.<a name="line.660"></a>
<span class="sourceLineNo">661</span>     * &lt;p&gt;<a name="line.661"></a>
<span class="sourceLineNo">662</span>     *<a name="line.662"></a>
<span class="sourceLineNo">663</span>     * @param command The text representation of the NNTP command to send.<a name="line.663"></a>
<span class="sourceLineNo">664</span>     * @param args    The arguments to the NNTP command. If this parameter is set to null, then the command is sent with no argument.<a name="line.664"></a>
<span class="sourceLineNo">665</span>     * @return The integer value of the NNTP reply code returned by the server in response to the command.<a name="line.665"></a>
<span class="sourceLineNo">666</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.666"></a>
<span class="sourceLineNo">667</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.667"></a>
<span class="sourceLineNo">668</span>     *                                       independently as itself.<a name="line.668"></a>
<span class="sourceLineNo">669</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.669"></a>
<span class="sourceLineNo">670</span>     */<a name="line.670"></a>
<span class="sourceLineNo">671</span>    public int sendCommand(final String command, final String args) throws IOException {<a name="line.671"></a>
<span class="sourceLineNo">672</span>        final StringBuilder __commandBuffer = new StringBuilder();<a name="line.672"></a>
<span class="sourceLineNo">673</span>        __commandBuffer.append(command);<a name="line.673"></a>
<span class="sourceLineNo">674</span><a name="line.674"></a>
<span class="sourceLineNo">675</span>        if (args != null) {<a name="line.675"></a>
<span class="sourceLineNo">676</span>            __commandBuffer.append(' ');<a name="line.676"></a>
<span class="sourceLineNo">677</span>            __commandBuffer.append(args);<a name="line.677"></a>
<span class="sourceLineNo">678</span>        }<a name="line.678"></a>
<span class="sourceLineNo">679</span>        __commandBuffer.append(SocketClient.NETASCII_EOL);<a name="line.679"></a>
<span class="sourceLineNo">680</span><a name="line.680"></a>
<span class="sourceLineNo">681</span>        final String message;<a name="line.681"></a>
<span class="sourceLineNo">682</span>        _writer_.write(message = __commandBuffer.toString());<a name="line.682"></a>
<span class="sourceLineNo">683</span>        _writer_.flush();<a name="line.683"></a>
<span class="sourceLineNo">684</span><a name="line.684"></a>
<span class="sourceLineNo">685</span>        fireCommandSent(command, message);<a name="line.685"></a>
<span class="sourceLineNo">686</span><a name="line.686"></a>
<span class="sourceLineNo">687</span>        return getReply();<a name="line.687"></a>
<span class="sourceLineNo">688</span>    }<a name="line.688"></a>
<span class="sourceLineNo">689</span><a name="line.689"></a>
<span class="sourceLineNo">690</span>    /**<a name="line.690"></a>
<span class="sourceLineNo">691</span>     * A convenience method to send the NNTP STAT command to the server, receive the initial reply, and return the reply code.<a name="line.691"></a>
<span class="sourceLineNo">692</span>     * &lt;p&gt;<a name="line.692"></a>
<span class="sourceLineNo">693</span>     *<a name="line.693"></a>
<span class="sourceLineNo">694</span>     * @return The reply code received from the server.<a name="line.694"></a>
<span class="sourceLineNo">695</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.695"></a>
<span class="sourceLineNo">696</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.696"></a>
<span class="sourceLineNo">697</span>     *                                       independently as itself.<a name="line.697"></a>
<span class="sourceLineNo">698</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.698"></a>
<span class="sourceLineNo">699</span>     */<a name="line.699"></a>
<span class="sourceLineNo">700</span>    public int stat() throws IOException {<a name="line.700"></a>
<span class="sourceLineNo">701</span>        return sendCommand(NNTPCommand.STAT);<a name="line.701"></a>
<span class="sourceLineNo">702</span>    }<a name="line.702"></a>
<span class="sourceLineNo">703</span><a name="line.703"></a>
<span class="sourceLineNo">704</span>    // DEPRECATED METHODS - for API compatibility only - DO NOT USE<a name="line.704"></a>
<span class="sourceLineNo">705</span><a name="line.705"></a>
<span class="sourceLineNo">706</span>    /**<a name="line.706"></a>
<span class="sourceLineNo">707</span>     * @param a article number<a name="line.707"></a>
<span class="sourceLineNo">708</span>     * @return number<a name="line.708"></a>
<span class="sourceLineNo">709</span>     * @throws IOException on error<a name="line.709"></a>
<span class="sourceLineNo">710</span>     * @deprecated - for API compatibility only - DO NOT USE<a name="line.710"></a>
<span class="sourceLineNo">711</span>     */<a name="line.711"></a>
<span class="sourceLineNo">712</span>    @Deprecated<a name="line.712"></a>
<span class="sourceLineNo">713</span>    public int stat(final int a) throws IOException {<a name="line.713"></a>
<span class="sourceLineNo">714</span>        return stat((long) a);<a name="line.714"></a>
<span class="sourceLineNo">715</span>    }<a name="line.715"></a>
<span class="sourceLineNo">716</span><a name="line.716"></a>
<span class="sourceLineNo">717</span>    /**<a name="line.717"></a>
<span class="sourceLineNo">718</span>     * A convenience method to send the NNTP STAT command to the server, receive the initial reply, and return the reply code.<a name="line.718"></a>
<span class="sourceLineNo">719</span>     * &lt;p&gt;<a name="line.719"></a>
<span class="sourceLineNo">720</span>     *<a name="line.720"></a>
<span class="sourceLineNo">721</span>     * @param articleNumber The number of the article to request from the currently selected newsgroup.<a name="line.721"></a>
<span class="sourceLineNo">722</span>     * @return The reply code received from the server.<a name="line.722"></a>
<span class="sourceLineNo">723</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.723"></a>
<span class="sourceLineNo">724</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.724"></a>
<span class="sourceLineNo">725</span>     *                                       independently as itself.<a name="line.725"></a>
<span class="sourceLineNo">726</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.726"></a>
<span class="sourceLineNo">727</span>     */<a name="line.727"></a>
<span class="sourceLineNo">728</span>    public int stat(final long articleNumber) throws IOException {<a name="line.728"></a>
<span class="sourceLineNo">729</span>        return sendCommand(NNTPCommand.STAT, Long.toString(articleNumber));<a name="line.729"></a>
<span class="sourceLineNo">730</span>    }<a name="line.730"></a>
<span class="sourceLineNo">731</span><a name="line.731"></a>
<span class="sourceLineNo">732</span>    /**<a name="line.732"></a>
<span class="sourceLineNo">733</span>     * A convenience method to send the NNTP STAT command to the server, receive the initial reply, and return the reply code.<a name="line.733"></a>
<span class="sourceLineNo">734</span>     * &lt;p&gt;<a name="line.734"></a>
<span class="sourceLineNo">735</span>     *<a name="line.735"></a>
<span class="sourceLineNo">736</span>     * @param messageId The message identifier of the requested article, including the encapsulating &amp;lt; and &amp;gt; characters.<a name="line.736"></a>
<span class="sourceLineNo">737</span>     * @return The reply code received from the server.<a name="line.737"></a>
<span class="sourceLineNo">738</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.738"></a>
<span class="sourceLineNo">739</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.739"></a>
<span class="sourceLineNo">740</span>     *                                       independently as itself.<a name="line.740"></a>
<span class="sourceLineNo">741</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.741"></a>
<span class="sourceLineNo">742</span>     */<a name="line.742"></a>
<span class="sourceLineNo">743</span>    public int stat(final String messageId) throws IOException {<a name="line.743"></a>
<span class="sourceLineNo">744</span>        return sendCommand(NNTPCommand.STAT, messageId);<a name="line.744"></a>
<span class="sourceLineNo">745</span>    }<a name="line.745"></a>
<span class="sourceLineNo">746</span><a name="line.746"></a>
<span class="sourceLineNo">747</span>    /**<a name="line.747"></a>
<span class="sourceLineNo">748</span>     * A convenience method to send the NNTP XHDR command to the server, receive the reply, and return the reply code.<a name="line.748"></a>
<span class="sourceLineNo">749</span>     * &lt;p&gt;<a name="line.749"></a>
<span class="sourceLineNo">750</span>     *<a name="line.750"></a>
<span class="sourceLineNo">751</span>     * @param header           a String naming a header line (e.g., "subject"). See RFC-1036 for a list of valid header lines.<a name="line.751"></a>
<span class="sourceLineNo">752</span>     * @param selectedArticles a String representation of the range of article headers required. This may be an article number, or a range of article numbers in<a name="line.752"></a>
<span class="sourceLineNo">753</span>     *                         the form "XXXX-YYYY", where XXXX and YYYY are valid article numbers in the current group. It also may be of the form "XXX-",<a name="line.753"></a>
<span class="sourceLineNo">754</span>     *                         meaning "return XXX and all following articles" In this revision, the last format is not possible (yet).<a name="line.754"></a>
<span class="sourceLineNo">755</span>     * @return The reply code received from the server.<a name="line.755"></a>
<span class="sourceLineNo">756</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.756"></a>
<span class="sourceLineNo">757</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.757"></a>
<span class="sourceLineNo">758</span>     *                                       independently as itself.<a name="line.758"></a>
<span class="sourceLineNo">759</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.759"></a>
<span class="sourceLineNo">760</span>     */<a name="line.760"></a>
<span class="sourceLineNo">761</span>    public int xhdr(final String header, final String selectedArticles) throws IOException {<a name="line.761"></a>
<span class="sourceLineNo">762</span>        final StringBuilder command = new StringBuilder(header);<a name="line.762"></a>
<span class="sourceLineNo">763</span>        command.append(" ");<a name="line.763"></a>
<span class="sourceLineNo">764</span>        command.append(selectedArticles);<a name="line.764"></a>
<span class="sourceLineNo">765</span>        return sendCommand(NNTPCommand.XHDR, command.toString());<a name="line.765"></a>
<span class="sourceLineNo">766</span>    }<a name="line.766"></a>
<span class="sourceLineNo">767</span><a name="line.767"></a>
<span class="sourceLineNo">768</span>    /**<a name="line.768"></a>
<span class="sourceLineNo">769</span>     * A convenience method to send the NNTP XOVER command to the server, receive the reply, and return the reply code.<a name="line.769"></a>
<span class="sourceLineNo">770</span>     * &lt;p&gt;<a name="line.770"></a>
<span class="sourceLineNo">771</span>     *<a name="line.771"></a>
<span class="sourceLineNo">772</span>     * @param selectedArticles a String representation of the range of article headers required. This may be an article number, or a range of article numbers in<a name="line.772"></a>
<span class="sourceLineNo">773</span>     *                         the form "XXXX-YYYY", where XXXX and YYYY are valid article numbers in the current group. It also may be of the form "XXX-",<a name="line.773"></a>
<span class="sourceLineNo">774</span>     *                         meaning "return XXX and all following articles" In this revision, the last format is not possible (yet).<a name="line.774"></a>
<span class="sourceLineNo">775</span>     * @return The reply code received from the server.<a name="line.775"></a>
<span class="sourceLineNo">776</span>     * @throws NNTPConnectionClosedException If the NNTP server prematurely closes the connection as a result of the client being idle or some other reason<a name="line.776"></a>
<span class="sourceLineNo">777</span>     *                                       causing the server to send NNTP reply code 400. This exception may be caught either as an IOException or<a name="line.777"></a>
<span class="sourceLineNo">778</span>     *                                       independently as itself.<a name="line.778"></a>
<span class="sourceLineNo">779</span>     * @throws IOException                   If an I/O error occurs while either sending the command or receiving the server reply.<a name="line.779"></a>
<span class="sourceLineNo">780</span>     */<a name="line.780"></a>
<span class="sourceLineNo">781</span>    public int xover(final String selectedArticles) throws IOException {<a name="line.781"></a>
<span class="sourceLineNo">782</span>        return sendCommand(NNTPCommand.XOVER, selectedArticles);<a name="line.782"></a>
<span class="sourceLineNo">783</span>    }<a name="line.783"></a>
<span class="sourceLineNo">784</span>}<a name="line.784"></a>




























































</pre>
</div>
</body>
</html>
